const getCheckedTagIDs=function(){for(var a=[],b=$(getCheckboxList()),d=0,g=0;d<b.length;++d)b.eq(d).prop("checked")&&(a[g++]=b.eq(d).attr("id").split("_")[1]);return a},showResult=function(){var a=getCheckedTagIDs(),b=calc(a);0>=a.length?$("#result-panel-footer-btn").html(""):($("#result-panel-footer-btn").html('<button onclick="clearSelection()">\ud0dc\uadf8 \ucd08\uae30\ud654</button> <input onclick="filterClicked(\'onlyHighStars\')" type="checkbox" id="result-panel-footer-ohsf" class="checkboxButton"><label class="button" for="result-panel-footer-ohsf"><span>\uace0\ub4f1\uae09 \ud655\uc815\uc2dd\ub9cc</span></label><div><br></div>'),
syncButtons());if(0==b.length)return $("#result-panel .panel:not(.guide-panel, .advertise)").remove(),!1===userConfig.display.guidePanel.value&&$("#result-panel").prepend('<div class="panel"></div>'),!1;a=new String;for(var d=0;d<b.length;++d){var g=b[d].lowestRarity;if(!(1==userConfig.filter.onlyHighRarity.value&&3>=g)){var e=b[d].opIDs,c=getTagNames(b[d].tagCode),l="",k="";l+=`<div style="margin-bottom: 0.4em" data-lang="${userConfig.locale.region.value}">`;for(var f=0;f<c.length;++f)l+='<span class="tag result-tag">'+
c[f]+"</span> ";l+="</div>";var h=0;for(f=0;f<e.length;++f)if(c=db.op[e[f]].rarity,!(0>userConfig.filter.rarity.value.indexOf(c))){0!=h&&h!=c&&(k+="<br>");var m=h="",t="",n="",p="",u="",q="";h=0<="tiny|small|medium|large".indexOf(userConfig.display.image.value)?h+('<div id="op_'+String(e[f])+'" class="tag result-op rarity_'+String(c)+'">'):h+('<div id="op_'+String(e[f])+'" class="tag result-op no-img rarity_'+String(c)+'">');q+="</div>";0<="tiny|small|medium|large".indexOf(userConfig.display.image.value)&&
(m+='<img class="result_op_thumb ',m+=userConfig.display.image.value,m+='" src="./images/op/thumb/'+db.op[e[f]].releaseOrder+'.png"> ');if(userConfig.display.name.value||userConfig.display.rarity.value){var r="result_op_text "+userConfig.display.image.value;userConfig.display.name.value&&!userConfig.display.rarity.value&&(r+=" only-name");!userConfig.display.name.value&&userConfig.display.rarity.value&&(r+=" only-rarity");t+='<div class="'+r+'">';u+="</div>"}userConfig.display.name.value&&(n+="<span>"+
db.op[e[f]].name[userConfig.locale.lang.value]+"</span> ",0<="tiny|small|large".indexOf(userConfig.display.image.value)?n+="<br>":0<="medium".indexOf(userConfig.display.image.value)&&(n+="<br>"));userConfig.display.rarity.value?(p+=' <span id="op_'+String(e[f])+'" class="star rarity_'+String(c)+'">',p+=" \u2605"+String(c),p+="</span><br>"):userConfig.display.name.value&&"small|medium".indexOf(userConfig.display.image.value);h="large"===userConfig.display.image.value?h+'<div style="display:flex; flex-direction: column">':
h+'<div style="display:flex; justify-content:space-between">';q+="</div>";k+=h+m+t+n+p+u+q;h=c}""===k&&(k='<span id="op_-1" class="tag result-op no-img">\ud544\ud130\ub9c1 \uc870\uac74\uc5d0 \ub9de\ub294 \uacb0\uacfc \uc5c6\uc74c</span>');a=userConfig.display.name.value||userConfig.display.rarity.value?a+`<div class="panel rarity_${String(g)}">`:a+`<div class="panel rarity_${String(g)} only-image">`;a+=`${l}<div style="display:inline-block" data-lang="${userConfig.locale.lang.value}">${k}</div>`;
a+="</div>"}}""==a&&(a='<div class="panel"><span class="tag result-tag">\uacb0\uacfc \uc5c6\uc74c</span><br><span id="op_-1" class="tag result-op no-img">\ud544\ud130\ub9c1 \uc870\uac74\uc5d0 \ub9de\ub294 \uacb0\uacfc \uc5c6\uc74c</span></div>');$("#result-panel .panel:not(.guide-panel, .advertise)").remove();$("#result-panel").prepend(a)};
(function(a){a.fn.textfill=function(b){b=parseInt(b,10);return this.each(function(){function d(){var e=g.parent();e.height();var c=e.width();e=parseInt(g.css("font-size"),10);c/=g.width();c*=e;g.height();b=e;g.css("fontSize",0<b&&c>b?b:c)}var g=a("span",this);a(window).resize(function(){"block"===document.querySelector(".modal").style.display&&d()});d()})}})(jQuery);
