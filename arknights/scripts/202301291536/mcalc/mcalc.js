var gtag_block=!1,itemOrder={keys:["\ud2b9\uc218\uc7ac\ub8cc","\uc77c\ubc18\uc7ac\ub8cc","\uc2a4\ud0ac\uac1c\ub860","\uce69\ub958","\ubaa8\ub4c8\uc7ac\ub8cc"],"\ubaa8\ub4c8\uc7ac\ub8cc":[["\ubaa8\ub4c8 \ub370\uc774\ud130 \uce69","\ub370\uc774\ud130 \ubcf4\ucda9 \uae30\uad6c","\ub370\uc774\ud130 \ubcf4\ucda9 \uc870\uac01"]],"\ud2b9\uc218\uc7ac\ub8cc":[["D32\uac15","\ubc14\uc774\ud3f4\ub77c \ub098\ub178\ud50c\ub808\uc774\ud06c \uce69","\uc911\ud569\uc81c","\uacb0\uc815 \uc804\uc790 \uc7a5\uce58","\uacf5\uc5c5\uc6a9 \uc18c\uae08 \uacb0\uc815"],
"RMA70-24;\ub9dd\uac04 \uc911\ud569\uccb4;\ud654\uc774\ud2b8 \ud638\uc2a4 \ucf5c;\uace0\uae09 \uc5f0\ub9c8\uc11d;\uc911\ud569\uc824;\uc5f4\ud569\uae08 \ud329;\uacb0\uc815 \ud68c\ub85c;\uc815\uc81c\ub41c \uc6a9\uc81c;\uc808\uc0ad\uc720 \uc6d0\uc561;\uacf5\uc5c5\uc6a9 \uc18c\uae08 \ud329".split(";"),"RMA70-12;\ub9dd\uac04 \uad11\uc11d;\ub85c\uc2dd \ucf5c;\uc5f0\ub9c8\uc11d;\uc824;\uc5f4\ud569\uae08;\uacb0\uc815 \ubd80\ud488;\ubc18\ud569\uc131 \uc6a9\uc81c;\uc911\ud569 \uc808\uc0ad\uc720;\uacf5\uc5c5\uc6a9 \uc18c\uae08 \ubc88\ub4e4".split(";")],
"\uc77c\ubc18\uc7ac\ub8cc":["\ud3ec\ub3c4\ub2f9 \ud329;\ud3f4\ub9ac\uc5d0\uc2a4\ud14c\ub974 \ud329;\uac1c\ub7c9 \uc7a5\uce58;\uc815\uc81c \uc6d0\uc554;\uc544\ucf00\ud1a4 \ud329;\uc774\ucca0 \ud329".split(";"),"\ud3ec\ub3c4\ub2f9 \ubc88\ub4e4;\ud3f4\ub9ac\uc5d0\uc2a4\ud14c\ub974 \ubc88\ub4e4;\ub9ac\ub274\uc5bc \uc7a5\uce58;\uc6d0\uc554 \ud050\ube0c \ubc88\ub4e4;\uc544\ucf00\ud1a4 \uc751\uc9d1\uccb4 \ubc88\ub4e4;\uc774\ucca0 \ubc88\ub4e4".split(";"),"\ud3ec\ub3c4\ub2f9;\ud3f4\ub9ac\uc5d0\uc2a4\ud14c\ub974;\uc7a5\uce58;\uc6d0\uc554 \ud050\ube0c;\uc544\ucf00\ud1a4 \uc751\uc9d1\uccb4;\uc774\ucca0".split(";"),
"\ub300\uccb4\ub2f9;\uc5d0\uc2a4\ud14c\ub974 \uc6d0\ub8cc;\ud30c\uc190\ub41c \uc7a5\uce58;\uc6d0\uc554;\ub514\ucf00\ud1a4;\uc774\ucca0 \uc870\uac01".split(";")],"\uc2a4\ud0ac\uac1c\ub860":[["\uc2a4\ud0ac\uac1c\ub860 \uc81c3\uad8c","\uc2a4\ud0ac\uac1c\ub860 \uc81c2\uad8c","\uc2a4\ud0ac\uac1c\ub860 \uc81c1\uad8c"]],"\uce69\ub958":[["\uce69 \ucca8\uac00\uc81c","\uad6c\ub9e4\uc99d\uba85\uc11c"],"\ubc45\uac00\ub4dc \ub4c0\uc5bc \uce69;\uac00\ub4dc \ub4c0\uc5bc \uce69;\ub514\ud39c\ub354 \ub4c0\uc5bc \uce69;\uc2a4\ub098\uc774\ud37c \ub4c0\uc5bc \uce69;\uce90\uc2a4\ud130 \ub4c0\uc5bc \uce69;\uba54\ub515 \ub4c0\uc5bc \uce69;\uc11c\ud3ec\ud130 \ub4c0\uc5bc \uce69;\uc2a4\ud398\uc15c\ub9ac\uc2a4\ud2b8 \ub4c0\uc5bc \uce69".split(";"),
"\ubc45\uac00\ub4dc \uce69\uc14b;\uac00\ub4dc \uce69\uc14b;\ub514\ud39c\ub354 \uce69\uc14b;\uc2a4\ub098\uc774\ud37c \uce69\uc14b;\uce90\uc2a4\ud130 \uce69\uc14b;\uba54\ub515 \uce69\uc14b;\uc11c\ud3ec\ud130 \uce69\uc14b;\uc2a4\ud398\uc15c\ub9ac\uc2a4\ud2b8 \uce69\uc14b".split(";"),"\ubc45\uac00\ub4dc \uce69;\uac00\ub4dc \uce69;\ub514\ud39c\ub354 \uce69;\uc2a4\ub098\uc774\ud37c \uce69;\uce90\uc2a4\ud130 \uce69;\uba54\ub515 \uce69;\uc11c\ud3ec\ud130 \uce69;\uc2a4\ud398\uc15c\ub9ac\uc2a4\ud2b8 \uce69".split(";")]};
const setInv=function(b){b="<hr>";for(var a=0;a<itemOrder.keys.length;++a){var d=itemOrder[itemOrder.keys[a]];b+='<div class="category_'+a+'">';for(var e=0;e<d.length;++e){for(var k=0;k<d[e].length;++k){var l=Number(d[e][k]),g=db.item[l].grade,f=getItem_have(l),m=getItem_need(l);f=null===f?"":f;m=null===m?"":m;f=0==f?"":f;m=0==m?"":m;b+='<div align="center" class="item grade_'+g+'" id="item_'+d[e][k]+'"><div class="item_thumb"><img src="./images/item/t/';b+=db.item[l].name.kr;b+='.png"><span class="item_thumb_name">';
b+=db.item[l].name.kr;b+='</span><div class="item_thumb_quantity">0</div></div><div class="item_body_have"><span>\ubcf4\uc720\ub7c9</span><br><div class="item_body_input_wrapper"><div class="sub">-</div><input type="text" class="item_body_have_input" value="';b+=f;b+='"><div class="add">+</div></div></div><div class="item_body_need"><span>\ud544\uc694\ub7c9</span><br><div class="item_body_input_wrapper"><div class="sub">-</div><input type="text" class="item_body_need_input" value="';b+=m;b+='"><div class="add">+</div></div></div></div>'}b+=
"<div></div>"}b+="<hr>";b+="</div>"}a=$(".item-container.inv");a.html(b);a.find(".add").off("click").on("click",function(){var c=this.parentElement.querySelector("input");c.value=(Number(c.value)||0)+1;$(c).trigger("change")});a.find(".sub").off("click").on("click",function(){var c=this.parentElement.querySelector("input"),h=Number(c.value)||0;c.value=0>=h-1?"":h-1;$(c).trigger("change")});a.find(".item_body_have_input").off("change keyup").on("change keyup",function(){saveInputToLocalStorage(this,
"have")&&$(this).closest(".item").trigger("refresh");gtag_block||gtag("event","\uc18c\uc9c0\ub7c9 \ubcc0\uacbd",{event_category:"\uc7ac\ub8cc \uacc4\uc0b0\uae30 2.0",event_label:"inv"})});a.find(".item_body_need_input").off("change keyup").on("change keyup",function(){saveInputToLocalStorage(this,"need")&&$(this).closest(".item").trigger("refresh");gtag_block||gtag("event","\ud544\uc694\ub7c9 \ubcc0\uacbd",{event_category:"\uc7ac\ub8cc \uacc4\uc0b0\uae30 2.0",event_label:"inv"})});a.find(".item").off("refresh").on("refresh",
function(){var c=Number(this.getAttribute("id").split("_")[1]),h=getItem_need(c);c=getItem_have(c)-h;h=this.querySelector(".item_thumb_quantity");h.innerText=c;h=h.classList;0>c?(h.add("minus"),h.remove("plus")):(0<c?h.add("plus"):h.remove("plus"),h.remove("minus"))});a.find(".item").trigger("refresh")},setCalc=function(b){console.log("setCalc");b="<hr>";for(var a=0;a<itemOrder.keys.length;++a){var d=itemOrder[itemOrder.keys[a]];b+='<div class="category_'+a+'">';for(var e=0;e<d.length;++e){for(var k=
0;k<d[e].length;++k){var l=Number(d[e][k]),g=db.item[l].grade,f=getItem_craft(l);f=null===f?"":f;f=0==f?"":f;var m=0<db.item[l].craft.length;b+='<div align="center" class="item grade_';b+=g;m||(b+=" uncraftable");b+='" id="calc-item_'+d[e][k]+'"><div class="item_thumb"><img src="./images/item/t/';b+=db.item[l].name.kr;b+='.png"><span class="item_thumb_name">';b+=db.item[l].name.kr;b+='</span><div class="item_thumb_quantity">0</div></div><div class="item_body_craft">';b=m?b+`<span>\uc81c\uc791\ub7c9</span><br><div class="item_body_input_wrapper"><div class="sub">-</div><input type="text" class="item_body_craft_input" value="${f}"><div class="add">+</div></div>`:
b+"<span>\uc81c\uc791 \ubd88\uac00</span>";b+="</div></div>"}b+="<div></div>"}b+="<hr>";b+="</div>"}a=$(".item-container.calc");a.html(b);a.find(".add").off("click").on("click",function(){if(!(0<breakdownGrade)){var c=this.parentElement.querySelector("input");c.value=(Number(c.value)||0)+1;$(c).trigger("change")}});a.find(".sub").off("click").on("click",function(){if(!(0<breakdownGrade)){var c=this.parentElement.querySelector("input"),h=Number(c.value)||0;c.value=0>=h-1?"":h-1;$(c).trigger("change")}});
a.find(".item:not(.uncraftable) .item_thumb_quantity").off("click").on("click",function(){if(!(0<breakdownGrade)){var c=Number(this.innerText),h=this.parentElement.parentElement.querySelector("input"),n=Number(h.value);h.value=n>c?n-c:"";$(h).trigger("change")}});a.find(".item_body_craft_input").off("change keyup").on("change keyup",function(){0<breakdownGrade?this.value=getItem_craft($(this).closest(".item").attr("id").split("_")[1]):(this.classList.contains("uncraftable")&&(this.value=""),saveInputToLocalStorage(this,
"craft"),gtag_block||gtag("event","\uc81c\uc791\ub7c9 \ubcc0\uacbd",{event_category:"\uc7ac\ub8cc \uacc4\uc0b0\uae30 2.0",event_label:"calc"}),$(this).closest(".item").trigger("refresh"))});a.find(".item").off("refresh").on("refresh",function(){var c=Number(this.getAttribute("id").split("_")[1]);setSurplus(this,getSurplus(c));refreshDemand(c,!0);applyConfig()})},saveInputToLocalStorage=function(b,a){b=$(b);if("have"===a){a=b.closest(".item");a=Number(a.attr("id").split("_")[1]);var d=Number(b.val().replace(/[^0-9]/g,
"")),e=Number(getItem_have(a));if(isNaN(d))return b.val(0===e?"":e),!1;setItem_have(a,d);b.val(0===d?"":d);return!0}if("need"===a){a=b.closest(".item");a=Number(a.attr("id").split("_")[1]);d=Number(b.val());e=Number(getItem_need(a));if(isNaN(d))return b.val(e),!1;setItem_need(a,d);return!0}if("craft"===a){a=b.closest(".item");a=Number(a.attr("id").split("_")[1]);d=Number(b.val());e=Number(getItem_need(a));if(isNaN(d))return b.val(e),!1;setItem_craft(a,d);return!0}console.log("invalid inputType:",
a);return!1};
$(document).ready(function(){clearSessionStorageCalcData();for(var b=function(g){for(var f in db.item)if(db.item[f].name.kr===g)return f;return-1},a=0;a<itemOrder.keys.length;++a)for(var d=itemOrder[itemOrder.keys[a]],e=0;e<d.length;++e)for(var k=0;k<d[e].length;++k){var l=b(d[e][k]);if(0>l){console.log(d[e][k],"error");return}d[e][k]=l}setInv();b=function(g){if(this.classList.contains("selected"))return!1;var f=document.querySelectorAll(".tab");g=0;for(var m=f.length;g<m;++g)f[g].dataset.tabName!==this.dataset.tabName?
f[g].classList.remove("selected"):f[g].classList.add("selected");f="";var c=document.querySelectorAll(".item-container");g=0;for(m=c.length;g<m;++g)c[g].dataset.tabName!==this.dataset.tabName?c[g].style.display="none":(f=c[g].dataset.tabName,"calc"===c[g].dataset.tabName?(0===c[g].innerHTML.length&&setCalc(),refreshAllCalcItems(),c[g].style.display="block",applyConfig()):c[g].style.display="block");gtag_block||gtag("event","\ud0ed \uc774\ub3d9",{event_category:"\uc7ac\ub8cc \uacc4\uc0b0\uae30 2.0",
event_label:f})};d=document.querySelectorAll(".tab");a=0;for(e=d.length;a<e;++a)d[a].addEventListener("click",b);document.querySelector('.tab[data-tab-name="inv"]').click();document.getElementById("content-body").classList.add("loaded")});
