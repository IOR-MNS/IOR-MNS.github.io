var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(a){return a.raw=a};$jscomp.createTemplateTagFirstArgWithRaw=function(a,b){a.raw=b;return a};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};
$jscomp.arrayFromIterator=function(a){for(var b,d=[];!(b=a.next()).done;)d.push(b.value);return d};$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))};
var openModalPrompt=function(){var a=document.querySelector(".modal");a.style.display="block";a.style.opacity="1";doNotRefreshResult=!0;showSearchResult()},closeModalPrompt=function(){var a=document.querySelector(".modal");a.style.opacity="0";setTimeout(function(){a.style.display="none"},300);doNotRefreshResult=!1;showResult()},getAllIDs=function(a){a=a.split("-")[0];for(var b=[],d=0;d<db.op.keys.length;++d)db.op.keys[d]===a?b.push(db.op.keys[d]):0===db.op.keys[d].indexOf(a+"-")&&b.push(db.op.keys[d]);
b.sort(function(h,f){h=h.split("-");f=f.split("-");1===h.length&&h.push(0);1===f.length&&f.push(0);return h[0]<f[0]?-1:h[0]>f[0]?1:Number(h[1])<Number(f[1])?-1:1});return b},main=function(){document.querySelector(".add-btn").addEventListener("click",function(){openModalPrompt()});document.querySelector(".close-btn").addEventListener("click",function(){closeModalPrompt(!0)});window.addEventListener("mousedown",function(a){"modal"===a.target.getAttribute("id")&&closeModalPrompt(!0)});document.getElementById("opname").addEventListener("keyup",
function(a){if(13===a.keyCode){for(;0<document.querySelectorAll(".search-result-op").length;)document.querySelector(".search-result-op").click();this.value="";searchingCondition.name=""}else{a="";for(var b=this.value.split(" "),d=0,h=b.length;d<h;++d)0!==b[d].length&&(0<d&&(a+=" "),a+=b[d][0].toUpperCase()+b[d].slice(1).toLowerCase());searchingCondition.name=a;showSearchResult()}});document.querySelectorAll(".rarity-btn").forEach(function(a){a.addEventListener("click",function(){var b=Number(this.getAttribute("name")),
d=searchingCondition.rarityArray.indexOf(b);0<=d?(searchingCondition.rarityArray.splice(d,1),this.classList.remove("selected")):(searchingCondition.rarityArray.push(b),this.classList.add("selected"));showSearchResult()})});document.querySelectorAll(".class-btn").forEach(function(a){a.addEventListener("click",function(){var b=getTagCodeByKRTagName(this.getAttribute("name"));b&searchingCondition.tagCode?this.classList.remove("selected"):this.classList.add("selected");searchingCondition.tagCode^=b;showSearchResult()})});
loadLocalStorage()},getTextWidth=function(a){var b="font-size:"+a.css("font-size")+";";b+="font-family:"+a.css("font-family")+";";a=$('<span style="'+b+'">'+a.html()+"</span>").appendTo("body");b=a.width();a.remove();return b},centerCnt=0,centerCacheHit=0,centerCache={},csp=[],ncsp=[],centerTime=0,doNotCenter=!1,centerSelect=function(a){if(!doNotCenter){centerTime=Date.now();var b=a.options[a.selectedIndex].innerText,d=centerCache[b];d?(a.style.textIndent=d,csp.push(Date.now()-centerTime)):(d=$(a),
a=getTextWidth($(a.options[a.selectedIndex])),a=(d.width()-a)/2,d.css("text-indent",a),centerCache[b]=a+"px",ncsp.push(Date.now()-centerTime))}},makeOpForm=function(a,b){b=void 0===b?{}:b;var d={},h=!0;b||(b={});"object"===typeof b.values&&(d=b.values);"boolean"===typeof b.asElement&&(h=b.asElement);var f=Number(db.op[a].rarity),c=[0,0,1,2,2,2][f-1],e=getMaxLevel(c,f),m=[4,7,7][c];db.op[a].name.en.toLowerCase();var g=Number.isInteger(d["current-elite"])?d["current-elite"]:0,p=Number.isInteger(d["target-elite"])?
d["target-elite"]:c,k=Number.isInteger(d["current-op-level"])?d["current-op-level"]:1,u=Number.isInteger(d["target-op-level"])?d["target-op-level"]:e,l=[];if(d["current-skill-level"]){d["current-skill-level"].forEach(function(q){l.push(1<=q&&10>=q?q:1)});e=0;for(var n=3-l.length;e<n;++e)l.push(1)}else l=[1,1,1];var r=[];if(d["target-skill-level"])for(d["target-skill-level"].forEach(function(q){r.push(1<=q&&10>=q?q:m)}),e=0,n=3-r.length;e<n;++e)r.push(m);else r=[m,m,m];d='<div class="remove-op thumb rarity_'+
f+'"><img alt='+db.op[a].releaseOrder+' src="./images/op/thumb/'+db.op[a].releaseOrder+'.png"></div><div class="elite"><span>\uc815\uc608\ud654</span><br><select class="current-elite">';for(e=0;e<=c;++e)d+='<option value="'+e+'"',e===g&&(d+=" selected"),d+=">"+e+"\ub2e8\uacc4</option>";d+='</select><span> \u25b8 </span><select class="target-elite">';for(e=0;e<=c;++e)d+='<option value="'+e+'"',e===p&&(d+=" selected"),d+=">"+e+"\ub2e8\uacc4</option>";d=d+'</select></div><div class="opLevel"><hr><button type="button" class="set-current-op-level-to-max-btn">MAX</button><span> \ub808\ubca8 </span><button type="button" class="set-target-op-level-to-max-btn">MAX</button><br><input type="text" class="current-op-level" value="'+
(k+'"><span> \u25b8 </span><input type="text" class="target-op-level" value="')+(u+'"></div><hr>');c=getNumOfSkills(a);if(0<c)for(d+="<span>\uc2a4\ud0ac \ub808\ubca8</span><br>",d+='<div class="skill">',e=1;e<=c;++e){1<e&&(d+="<br>");d+="<span>"+e+"\uc2a4\ud0ac </span>";d+='<select class="current-skill-level" data-index="'+(e-1)+'">';for(g=1;10>=g;++g)d+='<option value="'+g+'"',g===l[e-1]&&(d+="selected"),d+=">"+g+"</option>";d+="</select>";d+="<span> \u25b8 </span>";d+='<select class="target-skill-level" data-index="'+
(e-1)+'">';for(g=1;10>=g;++g)d+='<option value="'+g+'"',g===r[e-1]&&(d+="selected"),d+=">"+g+"</option>";d+="</select>"}d+="</div></div>";return h?(h=document.createElement("div"),h.classList.add("op"),h.setAttribute("name","op_"+a),h.innerHTML=d,h):'<div class="op" name="op_'+a+'">'+d+"</div>"},convertOldIDToNewID=function(){var a={0:"LN02",1:"RL03",2:"LT77",3:"RE41",4:"LM04",5:"AZ01",6:"JC01",7:"AA01",8:"FO03",9:"FO01",10:"PL03",11:"SS02",12:"LM20",13:"SR02",14:"RL06",15:"LM05",16:"NM01",17:"RL02",
18:"GG01",19:"R001",20:"VC03",21:"SK01",22:"RR01",23:"SR27",24:"R137",25:"BS01",26:"GG03",27:"SR01",28:"RB01",29:"AA02",30:"LM08",31:"R132",32:"SS01",33:"RL04",34:"RL01",35:"R106",36:"AA03",37:"LT01",38:"ST01",39:"R110",40:"ST03",41:"KZ03",42:"SR03",43:"JC06",44:"YD01",45:"SG01",46:"SW01",47:"LM16",48:"LM12",49:"R130",50:"R128",51:"RL05",52:"JC05",53:"PL05",54:"USS2",55:"LM15",56:"PL04",57:"LM19",58:"BS02",59:"FO02",60:"MN02",61:"VC05",62:"HT03",63:"PL02",64:"USS1",65:"SI01",66:"R119",67:"VC02",68:"US10",
69:"R100",70:"IU04",71:"R123",72:"HK01",73:"VC04",74:"IU07",75:"R104",76:"MN03",77:"R107",78:"LT02",79:"BS03",80:"VC01",81:"ST02",82:"LM10",83:"R122",84:"KZ04",85:"RB02",86:"LM11",87:"AA04",88:"LN01",89:"IU05",90:"R124",91:"JC03",92:"USS3",93:"JC04",94:"R108",95:"SW02",96:"R105",97:"PA15",98:"PA42",99:"PA41",100:"PA62",101:"PA65",102:"PA43",103:"PA13",104:"PA44",105:"PA63",106:"PA12",107:"PA61",108:"PA14",109:"PA45",110:"PA64",111:"PA11",112:"LT05",113:"BS04",114:"R303",115:"A44",116:"A43",117:"A41",
118:"A42",119:"RCX3",120:"RCX2"},b=Object.keys(localStorage).filter(function(m){return 0<=m.indexOf("optotal_")}),d="",h="",f="";d="";for(var c=0,e=b.length;c<e;++c)f=b[c].split("_"),d=f[1],f[1]=a[d],f[1]?(f=f.join("_"),h=b[c],d=localStorage.getItem(h),localStorage.setItem(f,d),localStorage.removeItem(h)):console.error(d+": \uc624\ud37c\ub808\uc774\ud130 ID \uccb4\uacc4 \ucd5c\uc2e0\ud654 \uc2e4\ud328. \ub9e4\uce6d\ub418\ub294 ID\uac00 \uc874\uc7ac\ud558\uc9c0 \uc54a\uc74c.");localStorage.setItem("version_optotal_localStorage",
JSON.stringify(db.idVersion.op))},sleep=function(a){return new Promise(function(b,d){setTimeout(b,a)})},loadLocalStorage=function(){console.log("loadLocalStorage");JSON.parse(localStorage.getItem("version_optotal_localStorage")||"1")<db.idVersion.op&&(console.log("\uc624\ud37c\ub808\uc774\ud130 ID \uccb4\uacc4 \ucd5c\uc2e0\ud654 \uc218\ud589"),convertOldIDToNewID());for(var a="current-elite target-elite current-op-level target-op-level current-skill-level target-skill-level".split(" "),b={IDs:[]},
d=0;d<db.op.keys.length;++d){var h=db.op.keys[d],f="optotal_"+h+"_";b[h]=[];for(var c=!1,e=0;e<a.length;++e)null!==localStorage.getItem(f+a[e])&&(b[h].push(a[e]),c=!0);c&&b.IDs.push(h)}if(0===b.IDs.length)document.getElementById("content-body").style.opacity=1,console.log("loadComplete");else{document.getElementById("selected-op-guide").style.display="none";b.IDs.sort(function(m,g){if(Number(db.op[m].rarity)>Number(db.op[g].rarity))return-1;if(Number(db.op[m].rarity)<Number(db.op[g].rarity))return 1;
m=m.split("-");g=g.split("-");if(m[0]<g[0])return-1;if(m[0]>g[0])return 1;1===m.length&&m.push(0);1===g.length&&g.push(0);return Number(m[1])<Number(g[1])?-1:1});Date.now();doNotRefreshResult=!0;a="";d=0;for(h=b.IDs.length;d<h;++d)a+='<div class="op" name="'+b.IDs[d]+'" style="color:#bbb;text-align:center;"><pre>\n\n\n\nLoading...</pre></div>';document.getElementById("selected-op").innerHTML=a;document.getElementById("content-body").style.opacity=1;setTimeout(function(){for(var m="",g=0,p=b.IDs.length;g<
p;++g){for(var k=b.IDs[g],u="optotal_"+k+"_",l={keys:[]},n=0,r=b[k].length;n<r;++n){var q=b[k][n],v=JSON.parse(localStorage.getItem(u+q));l[q]=v;l.keys.push(q)}m+=makeOpForm(k,{values:l,asElement:!1})}g=document.getElementById("selected-op");g.innerHTML=m;doNotCenter=!0;g.querySelectorAll(".op").forEach(function(w){addOpEventListener(w,!0)});doNotRefreshResult=!1;showResult();console.log("loadComplete")},0)}},removeAllOperators=function(a){confirm("\uc8fc\uc758: \uc774 \uc791\uc5c5\uc740 \ub418\ub3cc\ub9b4 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.\n\uc815\ub9d0 \uc774 \uc11c\ube44\uc2a4\uc758 \ubaa8\ub4e0 \ub370\uc774\ud130\ub97c \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")?
(Object.keys(localStorage).filter(function(b){return 0<=b.indexOf("optotal_")}).forEach(function(b){return localStorage.removeItem(b)}),location.reload()):alert("\ub370\uc774\ud130 \uc0ad\uc81c\uac00 \ucde8\uc18c\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")},triggerEvent=function(a,b,d){d=void 0===d?null:d;null!==d?a.dispatchEvent(new CustomEvent(b,{detail:d})):a.dispatchEvent(new CustomEvent(b))},getMaxElite=function(a){return[0,0,1,2,2,2][a-1]},getNumOfSkills=function(a,b){b=void 0===b?null:b;var d=db.op[a].rarity;
null===b&&(b=getMaxElite(d));if(null===db.op[a].skill){var h=a.split("-")[0];if(h===a||null===db.op[h].skill)return console.error("\ub2e4\uc74c \uc6d0\ubcf8 \uc624\ud37c\ub808\uc774\ud130\uc758 skill \uac12\uc774 null\uc784:",a),0;a=h}h=2<=getMaxElite(d)?db.op[a].skill.mastery.length:[0,0,1,2,2,3][d-1];var f=[1,2,3][b];void 0===f&&(console.error("elite \uac12\uc5d0 \ubb38\uc81c \uc788\uc74c:",b),f=[1,2,3][getMaxElite(d)]);f>h&&(f=h);return f},getMaxSkillLevel=function(a){return[4,7,10][a]},opFormRecalcHandler=
function(a){var b=this.getAttribute("name").split("_")[1],d=b.split("-")[0],h=b===d,f={};if(!h){f.elite=null===db.op[b].elite;f.skill=null===db.op[b].skill;var c=document.querySelector('#selected-op [name="op_'+d+'"]')}var e=this.querySelectorAll(".current-elite")[0],m=this.querySelectorAll(".target-elite")[0],g=this.querySelectorAll(".current-op-level")[0],p=this.querySelectorAll(".target-op-level")[0],k=this.querySelectorAll(".current-skill-level"),u=this.querySelectorAll(".target-skill-level"),
l=[],n=[];if(f.elite){var r=Number(c.querySelector(".current-elite").value);var q=Number(c.querySelector(".target-elite").value);var v=Number(c.querySelector(".current-op-level").value);var w=Number(c.querySelector(".target-op-level").value);e.disabled=!0;m.disabled=!0;g.disabled=!0;p.disabled=!0;this.querySelectorAll(".set-current-op-level-to-max-btn, .set-target-op-level-to-max-btn").forEach(function(x){return x.disabled=!0});this.querySelectorAll(".elite, .opLevel").forEach(function(x){return x.style.opacity=
0})}else r=Number(e.value),q=Number(m.value),v=Number(g.value),w=Number(p.value);f.skill?(c.querySelectorAll("current-skill-level").forEach(function(x){l.push(Number(x.value));x.disabled=!0}),c.querySelectorAll("target-skill-level").forEach(function(x){n.push(Number(x.value));x.disabled=!0}),this.querySelector(".skill").style.opacity=0):(k.forEach(function(x){l.push(Number(x.value))}),u.forEach(function(x){n.push(Number(x.value))}));var B=[r,q,v,w].concat($jscomp.arrayFromIterable(l),$jscomp.arrayFromIterable(n)),
z=this.dataset.inputValue;z=z?z.split(",").map(Number):[];var t=!1;c=0;for(var A=B.length;c<A;++c)if(B[c]!==z[c]){t=!0;break}if(t){A=null;A=h||void 0===f||!1===f.rarity?Number(db.op[b].rarity):Number(db.op[d].rarity);d=getNumOfSkills(b);t=null;t=a.detail&&a.detail.from?a.detail.from:{type:"all"};if("all"===t.type)B=a=z=!0;else{if("elite"===t.type)B=a=z=!0;else if("level"===t.type)z=!1,a=!0,B=!1;else if("skill"===t.type){if(a=z=!1,B=!0,!Number.isInteger(t.index)||0>t.index||3<=t.index){console.error("\uc778\ub371\uc2a4 \uc624\ub958:",
t.index);return}}else{console.error("\ud0c0\uc785 \uc624\ub958:",t.type);return}if("current"!==t.position&&"target"!==t.position){console.error("\ud3ec\uc9c0\uc158 \uc624\ub958:",t.position);return}}f.skill&&(B=!1);if(z){var C=getMaxElite(A);r>C&&(r=C);q>C&&(q=C);q<r&&(q=r)}if(B){var D=getNumOfSkills(b,r),E=getNumOfSkills(b,q),F=getMaxSkillLevel(r);for(c=0;c<d;++c)l[c]>F&&(l[c]=F);if("skill"===t.type&&"current"===t.position){var y=l[t.index];if(7>y)for(c=0;c<d;++c)l[c]=y;else for(c=0;c<d;++c)7>l[c]&&
(l[c]=7)}else{y=-Infinity;for(c=0;c<D;++c)if(l[c]>y&&(y=l[c],7<=y)){y=7;break}for(c=0;c<d;++c)l[c]<y&&(l[c]=y)}y=getMaxSkillLevel(q);for(c=0;c<d;++c)n[c]<l[c]?n[c]=l[c]:n[c]>y&&(n[c]=y);if("skill"===t.type&&"target"===t.position)if(f=n[t.index],7>f)for(c=0;c<d;++c)n[c]=f;else for(c=0;c<d;++c)7>n[c]&&(n[c]=7);else{f=-Infinity;for(c=0;c<E;++c)if(n[c]>f&&(f=n[c],7<=f)){f=7;break}for(c=0;c<d;++c)n[c]<f&&(n[c]=f)}}a&&(c=getMaxLevel(r,A),v>c&&(v=c),1>v&&(v=1),c=getMaxLevel(q,A),w>c&&(w=c),r===q&&w<v?w=
v:1>w&&(w=1));if(z){f=e.options;c=0;for(A=C;c<A;++c)f[c].disabled=c>C?!0:!1;e.value=r;f=m.options;c=0;for(A=f.length;c<A;++c)f[c].disabled=c<r||c>C?!0:!1;m.value=q}if(B){for(c=0;c<D;++c){k[c].disabled=!1;f=k[c].options;e=0;for(m=f.length;e<m;++e)f[e].disabled=e>=F?!0:!1;k[c].value=l[c]}for(c=D;c<d;++c)k[c].disabled=!0,k[c].value=l[c];for(c=0;c<E;++c){u[c].disabled=!1;f=u[c].options;e=0;m=f.length;for(k=l[c]-1;e<m;++e)f[e].disabled=e<k||e>=y?!0:!1;u[c].value=n[c]}for(c=E;c<d;++c)u[c].disabled=!0,u[c].value=
n[c]}a&&(g.value=v,p.value=w);this.dataset.inputValue=[r,q,v,w].concat($jscomp.arrayFromIterable(l),$jscomp.arrayFromIterable(n)).join(",");g="optotal_"+b+"_";localStorage.setItem(g+"current-elite",JSON.stringify(r));localStorage.setItem(g+"current-op-level",JSON.stringify(v));localStorage.setItem(g+"current-skill-level",JSON.stringify(l));localStorage.setItem(g+"target-elite",JSON.stringify(q));localStorage.setItem(g+"target-op-level",JSON.stringify(w));localStorage.setItem(g+"target-skill-level",
JSON.stringify(n));if(h)for(b=document.querySelectorAll('#selected-op [name^="op_'+b+'-"]'),c=0;c<b.length;++c)triggerEvent(b[c],"recalc");showResult()}else console.log("return")},removeOpMousedownHandler=function(){var a=this.closest(".op").getAttribute("name").split("_")[1].split("-")[0];document.querySelectorAll('#selected-op [name^="op_'+a+'"]').forEach(function(b){return b.style.opacity=.4})},removeOpMouseoverHandler=function(){var a=this.closest(".op").getAttribute("name").split("_")[1].split("-")[0];
document.querySelectorAll('#selected-op [name^="op_'+a+'"]').forEach(function(b){return b.style.opacity=.7})},removeOpMouseoutHandler=function(){var a=this.closest(".op").getAttribute("name").split("_")[1].split("-")[0];document.querySelectorAll('#selected-op [name^="op_'+a+'"]').forEach(function(b){return b.style.opacity=1})},removeOpClickHandler=function(){this.closest(".op");var a=this.closest(".op").getAttribute("name").split("_")[1];a=getAllIDs(a);for(var b=0;b<a.length;++b){document.querySelector('#selected-op [name="op_'+
a[b]+'"]').remove();for(var d="optotal_"+a[b]+"_",h="current-elite target-elite current-op-level target-op-level current-skill-level target-skill-level".split(" "),f=0;f<h.length;++f)localStorage.removeItem(d+h[f])}null===document.querySelector('div[name*="op_"].op')&&(document.getElementById("selected-op-guide").style.display="block");showResult()},setCurrentOpLevelToMaxHandler=function(){if(!this.disabled){var a=this.closest(".op"),b=a.getAttribute("name").split("_")[1],d=a.querySelector(".current-op-level");
if(b in db.op){var h=Number(a.querySelector(".current-elite").value);b=getMaxLevel(h,Number(db.op[b].rarity));d.value=b;triggerEvent(a,"recalc",{from:{type:"level",position:"current"}})}else console.error("\uc5d0\ub7ec: \ucde8\ub4dd\ud55c \uc624\ud37c\ub808\uc774\ud130 \uc544\uc774\ub514("+b+")\ub97c DB\uc5d0\uc11c \ucc3e\uc744 \uc218 \uc5c6\uc74c")}},setTargetOpLevelToMaxHandler=function(){if(!this.disabled){var a=this.closest(".op"),b=a.getAttribute("name").split("_")[1],d=a.querySelector(".target-op-level");
if(b in db.op){var h=Number(a.querySelector(".target-elite").value);b=getMaxLevel(h,Number(db.op[b].rarity));d.value=b;triggerEvent(a,"recalc",{from:{type:"level",position:"target"}})}else console.error("\uc5d0\ub7ec: \ucde8\ub4dd\ud55c \uc624\ud37c\ub808\uc774\ud130 \uc544\uc774\ub514("+b+")\ub97c DB\uc5d0\uc11c \ucc3e\uc744 \uc218 \uc5c6\uc74c")}},currentEliteChangeHandler=function(){this.disabled||triggerEvent(this.closest(".op"),"recalc",{from:{type:"elite",position:"current"}})},targetEliteChangeHandler=
function(){this.disabled||triggerEvent(this.closest(".op"),"recalc",{from:{type:"elite",position:"target"}})},currentOpLevelChangeHandler=function(){this.disabled||triggerEvent(this.closest(".op"),"recalc",{from:{type:"level",position:"current"}})},targetOpLevelChangeHandler=function(){this.disabled||triggerEvent(this.closest(".op"),"recalc",{from:{type:"level",position:"target"}})},currentSkillLevelChangeHandler=function(a){this.disabled||triggerEvent(this.closest(".op"),"recalc",{from:{type:"skill",
position:"current",index:Number(a.target.dataset.index)}})},targetSkillLevelChangeHandler=function(){this.disabled||triggerEvent(this.closest(".op"),"recalc",{from:{type:"skill",position:"target",index:Number(event.target.dataset.index)}})},addOpEventListener=function(a,b){b=void 0===b?!1:b;a.addEventListener("recalc",opFormRecalcHandler);a.querySelector(".remove-op").addEventListener("mousedown",removeOpMousedownHandler);a.querySelector(".remove-op").addEventListener("mouseover",removeOpMouseoverHandler);
a.querySelector(".remove-op").addEventListener("mouseout",removeOpMouseoutHandler);a.querySelector(".remove-op").addEventListener("click",removeOpClickHandler);a.querySelector(".set-current-op-level-to-max-btn").addEventListener("click",setCurrentOpLevelToMaxHandler);a.querySelector(".set-target-op-level-to-max-btn").addEventListener("click",setTargetOpLevelToMaxHandler);a.querySelector(".current-elite").addEventListener("change",currentEliteChangeHandler);a.querySelector(".target-elite").addEventListener("change",
targetEliteChangeHandler);a.querySelector(".current-op-level").addEventListener("change",currentOpLevelChangeHandler);a.querySelector(".target-op-level").addEventListener("change",targetOpLevelChangeHandler);a.querySelectorAll(".current-skill-level").forEach(function(d){d.addEventListener("change",currentSkillLevelChangeHandler)});a.querySelectorAll(".target-skill-level").forEach(function(d){d.addEventListener("change",targetSkillLevelChangeHandler)});b&&triggerEvent(a,"recalc",{from:{type:"all"}})},
searchingCondition={name:"",rarityArray:[],tagCode:0},getTagCodeByKRTagName=function(a){for(var b=0;b<db.tag.keys.length;++b)if(db.tag[db.tag.keys[b]].name.kr==a)return Number(db.tag[db.tag.keys[b]].tagCode)},showSearchResult=function(){searchingCondition.rarityArray.sort(function(c,e){return c>e?-1:1});for(var a=searchOp(searchingCondition.name,searchingCondition.rarityArray,searchingCondition.tagCode),b=[],d=0,h=a.keys.length,f="";d<h;++d)f=a.keys[d],b.push([a[f].name.kr,f]);b.sort(function(c,e){return c[0].localeCompare(e[0])});
a="";for(d=0;d<b.length;++d)a+='<div class="search-result-op" name="op_'+b[d][1]+'"><img src="./images/op/thumb/'+db.op[b[d][1]].releaseOrder+'.png"><div><span>'+b[d][0]+"</span></div></div>";""==a&&(a='<p style="font-size: 0.5em; text-align: center">\uac80\uc0c9 \uacb0\uacfc\uac00 \uc874\uc7ac\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.</p>');document.querySelector(".modal-footer>.search-result").innerHTML=a;document.querySelectorAll(".search-result-op").forEach(function(c){c.addEventListener("click",
function(){for(var e=this.getAttribute("name").split("_")[1],m=e.split("-")[0],g=getAllIDs(e),p=0;p<g.length;++p)if(console.log(g[p],"\ucd94\uac00"),"optotal_"+g[p]+"_current-elite"in localStorage)console.error(e+": \uc774\ubbf8 \ucd94\uac00\ub41c \uc624\ud37c\ub808\uc774\ud130");else{var k=makeOpForm(g[p],{values:{},asElement:!0});addOpEventListener(k,!0);document.getElementById("selected-op-guide").style.display="none";document.getElementById("selected-op").appendChild(k)}e=document.querySelectorAll('.search-result-op[name^="op_'+
m+'"]');for(p=0;p<e.length;++p)e[p].remove();0===document.querySelectorAll(".modal-footer>.search-result>.search-result-op").length&&(document.querySelector(".modal-footer>.search-result").innerHTML='<p style="font-size: 0.5em; text-align: center">\uac80\uc0c9 \uacb0\uacfc\uac00 \uc874\uc7ac\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.</p>')})});document.querySelectorAll(".search-result-op div").forEach(function(c){$(c).textfill()})};
(function(a){a.fn.textfill=function(b){b=parseInt(b,10);return this.each(function(){function d(){var f=h.parent(),c=f.height(),e=f.width();f=parseInt(h.css("font-size"),10);e/=h.width();var m=f*(e-.1);e=c/h.height();b=f*(e-.1);h.css("fontSize",0<b&&m>b?b:m)}var h=a("span",this);a(window).resize(function(){"block"===document.querySelector(".modal").style.display&&d()});d()})}})(jQuery);
var searchOp=function(a,b,d){a=a.replace(/(\s*)/g,"").toLowerCase();var h=0<a.length,f=0<b.length,c=0!=d;if(!(h||f||c))return{keys:[]};for(var e={},m=Object.keys(localStorage).filter(function(r){return 0===r.indexOf("optotal_")}),g=0,p=db.op.keys.length,k="",u="";g<p;++g){k=db.op.keys[g];u="optotal_"+k;for(var l=0,n=m.length;l<n&&0!==m[l].indexOf(u);++l);l<n||(e[k]={},e[k].rarity=db.op[k].rarity,e[k].tagCode=db.op[k].tagCode,e[k].name={},e[k].name.kr=db.op[k].name.kr,e[k].name.en=db.op[k].name.en,
e[k].name.jp=db.op[k].name.jp,e[k].name.cn=db.op[k].name.cn)}e.keys=Object.keys(e);if(h)for(g=0,p=e.keys.length,k="";g<p;++g)k=e.keys[g],0>e[k].name.kr.replace(/(\s*)/g,"").toLowerCase().indexOf(a)&&0>e[k].name.en.replace(/(\s*)/g,"").toLowerCase().indexOf(a)&&0>e[k].name.jp.replace(/(\s*)/g,"").toLowerCase().indexOf(a)&&0>e[k].name.cn.replace(/(\s*)/g,"").toLowerCase().indexOf(a)&&(delete e[k],e.keys.splice(g,1),--g,--p);if(f)for(a=!1,g=0,h=e.keys.length,k="";g<h;++g){k=e.keys[g];a=!1;l=0;for(n=
b.length;l<n;++l)if(rarity=b[l],e[k].rarity==rarity){a=!0;break}a||(delete e[k],e.keys.splice(g,1),--g,--h)}if(c)for(g=0,p=e.keys.length,k="";g<p;++g)k=e.keys[g],d&e[k].tagCode||(delete e[k],e.keys.splice(g,1),--g,--p);return e},addResultToMcalc=function(a){var b=fetchInputData();if(!1===b)showTooltip("\uc804\uc1a1\ud560 \ub370\uc774\ud130\uac00 \uc874\uc7ac\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4",a.target,"error");else if(confirm("\uacb0\uacfc \ub370\uc774\ud130\ub97c \uc804\uc1a1\ud558\uc2dc\ub824\uba74 \ud655\uc778 \ubc84\ud2bc\uc744 \ub20c\ub7ec\uc8fc\uc2ed\uc2dc\uc624.")){b=
sortResultData(calc(b));for(var d=0;d<b.total.IDs.length;++d){var h=Number(b.total.IDs[d]),f=Number(b.total[h]);f+=JSON.parse(localStorage.getItem("mcalc_item-need_"+h));localStorage.setItem("mcalc_item-need_"+h,JSON.stringify(f))}showTooltip("\uc131\uacf5\uc801\uc73c\ub85c \uacb0\uacfc \ub370\uc774\ud130\ub97c \uc804\uc1a1\ud558\uc600\uc2b5\ub2c8\ub2e4",a.target,"success");confirm("\uc131\uacf5\uc801\uc73c\ub85c \uacb0\uacfc \ub370\uc774\ud130\ub97c \uc804\uc1a1\ud558\uc600\uc2b5\ub2c8\ub2e4.\n\ubc14\ub85c \uc7ac\ub8cc \uacc4\uc0b0\uae30\ub85c \uc774\ub3d9\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&
(location.href="mcalc.html")}else showTooltip("\ub370\uc774\ud130 \uc804\uc1a1\uc774 \ucde8\uc18c\ub418\uc5c8\uc2b5\ub2c8\ub2e4",a.target,"error")};main();