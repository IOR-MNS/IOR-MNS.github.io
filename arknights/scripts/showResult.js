var parseResult=function(a){for(var f=[],c=[],e=new String,b=0,g=0,d=0;b<a.length;++b)"#"===a.charAt(b)?(c[d++]=e,e=""):"@"===a.charAt(b)?(c[d++]=e,e="",f[g++]=c.filter(function(a){return null!=a}),c=[]):e+=a.charAt(b);a=[];for(c=b=0;b<f.length;b+=2)a[c]=[],a[c][0]=f[b],a[c][1]=f[b+1],c++;return a},getStar=function(a){return Number(a.charAt(a.length-2))},showResult=function(a){document.getElementById("calcResult").innerHTML="";a=parseResult(a);for(var f=new String,c=0;c<a.length;++c){for(var e=a[c][0],b=a[c][1],g="",d=0;d<e.length;++d)g+='<span class="result_tag">'+e[d]+"</span>";g+="<br>";for(d=0;d<b.length;++d)g+='<span class="result_op">'+b[d]+"</span>";e=0;for(d=b.length-1;0<=d&&!(e=getStar(b[d]),3<=e);--d);f+='<form class="star_'+String(e)+'">';f+=g;f+="</form>"}document.getElementById("calcResult").innerHTML=f};