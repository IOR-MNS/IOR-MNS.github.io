var generateTagCodes=function(b,a,f,e,c,d,g){c="undefined"===typeof c?0:c;d="undefined"===typeof d?0:d;g="undefined"===typeof g?0:g;if(c>=f)return a[e]=g,e+1;for(;d<b.length;++d)e=generateTagCodes(b,a,f,e,c+1,d+1,g|b[d]);return e},checkTag=function(b,a){for(var f=a.length=0,e=opMap.entries(),c=0;c<opMap.size;++c){var d=e.next().value;(b&d[1])==b&&0==(tagMap.get("\ucd9c\ud604\ubd88\uac00")&d[1])&&(0!=(b&tagMap.get("\uace0\uae09\ud2b9\ubcc4\ucc44\uc6a9"))?0!=(d[1]&tagMap.get("\uace0\uae09\ud2b9\ubcc4\ucc44\uc6a9"))&&(a[f++]=d[0]):0!=(b&tagMap.get("\ud2b9\ubcc4\ucc44\uc6a9"))?0!=(d[1]&tagMap.get("\ud2b9\ubcc4\ucc44\uc6a9"))&&(a[f++]=d[0]):0==(d[1]&tagMap.get("\uace0\uae09\ud2b9\ubcc4\ucc44\uc6a9"))&&(a[f++]=d[0]))}},calc=function(b){if(0==b.length)return[];for(var a=0;a<b.length;++a)if(!1===validateTagName(b[a]))return[];var f=[],e=[];for(a=0;a<b.length;++a)f[a]=tagMap.get(b[a]);a=1;for(var c=0;a<=b.length;++a)c=generateTagCodes(f,e,a,c);b=[];for(f=a=0;a<e.length;++a){c=[];var d=[];getTagNames(e[a],c);checkTag(e[a],d);if(0<d.length){d.sort(function(a,b){var d=getStar(a),e=getStar(b);return d>e?-1:d<e?1:a<b?-1:a>b?1:0});var g=[];g[0]=c;g[1]=d;b[f++]=g}}b.sort(function(a,b){var d=a[1],e=b[1],f;for(f=1;;){var c=d[d.length-f];var g=getStar(c);if(3<=g||f>=d.length)break;++f}for(f=1;;){c=e[e.length-f];c=getStar(c);if(3<=c||f>=e.length)break;++f}if(g>c)return-1;if(g<c)return 1;c=d[0];f=getStar(c);c=e[0];c=getStar(c);return f>c?-1:f<c?1:d.length<e.length?-1:d.length>e.length?1:0});return b},selectionCount=0,countCheck=function(b){b.checked?selectionCount++:selectionCount--;return 6<selectionCount?(b.checked=!1,selectionCount--,!1):!0},tagClicked=function(b){if(!1===countCheck(b))return!1;showResult();refreshStyle()},clearSelection=function(){for(var b=document.querySelectorAll(".checkboxTag"),a=0;a<b.length;++a)b[a].checked=!1,selectionCount=0;showResult();refreshStyle()},onlyHighStarsFilter=!1;$(function(){onlyHighStarsFilter=$("#onlyHighStarsFilterBtn").prop("checked")});var filterClicked=function(b){"onlyHighStarsFilterBtn"===$(b).attr("id")&&(onlyHighStarsFilter=!onlyHighStarsFilter);showResult();refreshStyle()},showResult=function(){var b=calc(getCheckedTags());if(0==b.length)return document.getElementById("calcResult").innerHTML="<form></form>",!1;for(var a=new String,f=0;f<b.length;++f){for(var e=b[f][0],c=b[f][1],d="",g=0;g<e.length;++g)d+='<span class="result_tag">'+e[g]+"</span>";d+="<br>";for(g=0;g<c.length;++g)d+='<span class="result_op">'+c[g]+"</span>";e=0;for(g=c.length-1;0<=g&&!(e=getStar(c[g]),3<=e);--g);onlyHighStarsFilter&&3>=e||(a+='<form class="star_'+String(e)+'">',a+=d,a+="</form>")}""==a&&(a='<form><span class="result_tag">\uacb0\uacfc \uc5c6\uc74c</span><br><span class="result_op">\uacb0\uacfc \uc5c6\uc74c</span></form>');document.getElementById("calcResult").innerHTML=a},getStar=function(b){return Number(b.charAt(b.length-2))},validateTagName=function(b){for(var a=!1,f=tagMap.keys(),e,c=0;c<tagMap.size;++c)if(e=f.next().value,e===b){a=!0;break}return a},getCheckedTags=function(){for(var b=[],a=document.querySelectorAll(".checkboxTag"),f=0,e=0;f<a.length;++f)!0===a[f].checked&&(b[e++]=a[f].name);return b},getTagNames=function(b,a){a.length=0;for(var f=tagMap.entries(),e=0,c=0;e<tagMap.size;++e){var d=f.next().value;0!=(d[1]&b)&&(a[c++]=d[0])}};